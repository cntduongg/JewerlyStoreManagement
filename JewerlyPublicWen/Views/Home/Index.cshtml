@{
    ViewBag.Title = "Sản Phẩm Trang Sức";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Hero Section -->
<section class="hero-section bg-light py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 text-primary fw-bold">
                    <i class="fas fa-gem me-3"></i>BỘ SƯU TẬP TRANG SỨC
                </h1>
                <p class="lead text-muted mt-3">
                    Khám phá những thiết kế trang sức tinh xảo, kết hợp giữa truyền thống và hiện đại
                </p>
            </div>
            <div class="col-lg-6 text-center">
                <img src="https://png.pngtree.com/png-clipart/20200727/original/pngtree-line-art-diamond-jewelry-logo-vector-illustration-design-png-image_5320848.jpg"
                     alt="Jewelry Collection" class="img-fluid rounded shadow" style="max-height: 300px;">
            </div>
        </div>
    </div>
</section>

<!-- Filter & Category Section -->
<section class="filter-section py-4 bg-white border-bottom">
    <div class="container">
        <div class="row g-3 align-items-center">
            <!-- Category Filter -->
            <div class="col-md-6">
                <div class="d-flex align-items-center">
                    <span class="me-3 text-dark fw-bold"><i class="fas fa-filter me-2"></i>Bộ lọc:</span>
                    <select id="categoryFilter" class="form-select w-auto">
                        <option value="">Tất cả danh mục</option>
                        <option value="1">Nhẫn</option>
                        <option value="2">Dây chuyền</option>
                        <option value="3">Vòng tay</option>
                        <option value="4">Bông tai</option>
                        <option value="5">Mặt dây</option>
                    </select>
                </div>
            </div>

            <!-- Search Box -->
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" id="searchInput" class="form-control" placeholder="Tìm kiếm sản phẩm...">
                    <button class="btn btn-primary" type="button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Products Grid Section -->
<section class="products-section py-5">
    <div class="container">
        <!-- Products Grid -->
        <div id="productsGrid" class="row g-4">
            <!-- PRODUCT ITEM TEMPLATE - Sẽ được populate bằng JavaScript -->
            <div class="col-xl-3 col-lg-4 col-md-6 product-item" style="display: none;">
                <div class="card product-card h-100 border-0 shadow-sm">
                    <div class="position-relative">
                        <!-- PRODUCT IMAGE - API sẽ cung cấp MainImageUrl -->
                        <img src="" class="card-img-top product-image" alt="Product Image"
                             style="height: 250px; object-fit: cover;">
                        <div class="position-absolute top-0 end-0 m-2">
                            <span class="badge bg-danger">NEW</span>
                        </div>
                    </div>
                    <div class="card-body d-flex flex-column">
                        <!-- PRODUCT CATEGORY - API sẽ cung cấp CategoryName -->
                        <small class="text-muted product-category mb-1"></small>

                        <!-- PRODUCT NAME - API sẽ cung cấp ProductName -->
                        <h6 class="card-title product-name text-dark mb-2"></h6>

                        <!-- PRODUCT DESCRIPTION - API sẽ cung cấp ShortDescription -->
                        <p class="card-text product-description text-muted small flex-grow-1"></p>

                        <div class="mt-auto">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <!-- PRODUCT PRICE - API sẽ cung cấp SellingPrice -->
                                <span class="text-primary fw-bold product-price"></span>

                                <!-- PRODUCT WEIGHT - API sẽ cung cấp GoldWeight -->
                                <small class="text-muted product-weight"></small>
                            </div>
                            <button class="btn btn-outline-primary w-100 btn-view-detail">
                                <i class="fas fa-eye me-2"></i>Xem chi tiết
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PLACEHOLDER FOR EMPTY STATE -->
            <div id="emptyState" class="col-12 text-center py-5" style="display: none;">
                <i class="fas fa-gem fa-3x text-muted mb-3"></i>
                <h5 class="text-muted">Không tìm thấy sản phẩm nào</h5>
                <p class="text-muted">Hãy thử điều chỉnh bộ lọc hoặc tìm kiếm với từ khóa khác</p>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="text-center py-4">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Đang tải...</span>
            </div>
            <p class="text-muted mt-2">Đang tải sản phẩm...</p>
        </div>

        <!-- Pagination -->
        <nav aria-label="Product pagination" class="mt-5">
            <ul id="pagination" class="pagination justify-content-center">
                <!-- PAGINATION WILL BE GENERATED BY JAVASCRIPT -->
            </ul>
        </nav>
    </div>
</section>

<!-- API Integration Notes -->
@section Scripts {
    <script>
        // ==================================================
        // API INTEGRATION NOTES - CÁC VỊ TRÍ CẦN MÓC API
        // ==================================================

        // 1. API ENDPOINT FOR PRODUCTS
        // const API_URL = 'https://localhost:7114/api/Products';

        // 2. LOAD PRODUCTS ON PAGE LOAD
        // function loadProducts(page = 1, categoryId = '', searchTerm = '') {
        //   fetch(`${API_URL}?page=${page}&pageSize=12&categoryId=${categoryId}&search=${searchTerm}`)
        //     .then(response => response.json())
        //     .then(data => {
        //       displayProducts(data.products);
        //       setupPagination(data.totalPages, page);
        //     });
        // }

        // 3. DISPLAY PRODUCTS IN GRID
        // function displayProducts(products) {
        //   const grid = document.getElementById('productsGrid');
        //   grid.innerHTML = '';
        //
        //   products.forEach(product => {
        //     const productHtml = `
        //       <div class="col-xl-3 col-lg-4 col-md-6">
        //         <div class="card product-card h-100">
        //           <img src="${product.mainImageUrl}" class="card-img-top">
        //           <div class="card-body">
        //             <h6>${product.productName}</h6>
        //             <p class="text-primary">${formatCurrency(product.sellingPrice)}</p>
        //           </div>
        //         </div>
        //       </div>
        //     `;
        //     grid.innerHTML += productHtml;
        //   });
        // }

        // 4. CATEGORY FILTER EVENT
        // document.getElementById('categoryFilter').addEventListener('change', function() {
        //   loadProducts(1, this.value, document.getElementById('searchInput').value);
        // });

        // 5. SEARCH FUNCTIONALITY
        // document.getElementById('searchInput').addEventListener('input', debounce(function() {
        //   loadProducts(1, document.getElementById('categoryFilter').value, this.value);
        // }, 500));

        // ==================================================
        // TEMPORARY PLACEHOLDER SCRIPT
        // ==================================================
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loading spinner after 2 seconds (simulate API call)
            setTimeout(() => {
                document.getElementById('loadingSpinner').style.display = 'none';
                document.getElementById('emptyState').style.display = 'block';
            }, 2000);

            // Event listeners for future API integration
            document.getElementById('categoryFilter').addEventListener('change', function() {
                console.log('Category filter changed:', this.value);
                // TODO: Call loadProducts() with category filter
            });

            document.getElementById('searchInput').addEventListener('input', function() {
                console.log('Search input:', this.value);
                // TODO: Call loadProducts() with search term
            });
        });
    </script>

    <style>
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
        }

        .hero-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .btn-view-detail {
            transition: all 0.3s ease;
        }

        .btn-view-detail:hover {
            background-color: #0d6efd;
            color: white;
        }

        .product-image {
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }
    </style>
}